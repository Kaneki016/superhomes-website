@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    /* SuperHomes Brand Colors */
    --primary-50: #fff1f4;
    --primary-100: #ffe4e9;
    --primary-200: #ffcdd8;
    --primary-300: #ffa3b8;
    --primary-400: #ff6b9d;
    --primary-500: #ff3d7f;
    --primary-600: #ed1461;
    --primary-700: #c44569;
    --primary-800: #a31d4d;
    --primary-900: #8a1b44;
  }

  * {
    @apply border-gray-200;
  }

  body {
    @apply bg-white text-gray-900 font-sans;
    overflow-x: hidden;
  }

  /* Fix for SVG icons rendering at massive sizes */
  svg {
    max-width: 100%;
    max-height: 100%;
  }

  /* Ensure SVGs respect their container sizes */
  svg:not([width]):not([height]) {
    width: 1em;
    height: 1em;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-heading;
  }
}

@layer components {

  /* Glassmorphism Effect */
  .glass {
    @apply bg-white/80 backdrop-blur-lg border border-white/20 shadow-xl;
  }

  .glass-dark {
    @apply bg-gray-900/80 backdrop-blur-lg border border-gray-700/20 shadow-xl;
  }

  /* Gradient Buttons */
  .btn-primary {
    @apply bg-rose-500 hover:bg-rose-600 text-white font-semibold px-6 py-3 rounded-lg hover:shadow-lg hover:scale-105 transition-all duration-300;
  }

  .btn-secondary {
    @apply bg-white text-primary-600 font-semibold px-6 py-3 rounded-lg border-2 border-primary-400 hover:bg-primary-50 hover:shadow-lg transition-all duration-300;
  }

  /* Legacy Property Card (for backwards compatibility) */
  .property-card {
    @apply bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer hover:-translate-y-2;
  }

  /* NEW PropertyGuru-Style Property Card V2 */
  .property-card-v2 {
    @apply bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300;
  }

  .property-card-v2:hover {
    @apply shadow-xl border-primary-200;
  }

  .property-card-header {
    @apply flex items-center justify-between gap-4 px-4 py-3 border-b border-gray-100 bg-gray-50/50;
  }

  .property-card-avatar {
    @apply w-9 h-9 rounded-full bg-gradient-primary flex-shrink-0 overflow-hidden flex items-center justify-center;
  }

  .contact-btn {
    @apply px-4 py-1.5 text-sm font-medium text-primary-600 bg-white border border-primary-300 rounded-lg hover:bg-primary-50 hover:border-primary-400 transition-all duration-200;
  }

  .property-card-gallery {
    @apply relative h-56 bg-gray-100 overflow-hidden;
  }

  .carousel-nav {
    @apply absolute top-1/2 -translate-y-1/2 w-8 h-8 bg-white/90 hover:bg-white rounded-full flex items-center justify-center shadow-md opacity-0 group-hover:opacity-100 transition-all duration-200 z-10;
  }

  .carousel-nav-prev {
    @apply left-3;
  }

  .carousel-nav-next {
    @apply right-3;
  }

  .carousel-pagination {
    @apply absolute bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-1.5;
  }

  .carousel-dot {
    @apply w-2 h-2 rounded-full bg-white/50 transition-all duration-200;
  }

  .carousel-dot.active {
    @apply bg-white w-4;
  }

  .gallery-info {
    @apply absolute bottom-3 left-3 flex items-center gap-2;
  }

  .gallery-info-item {
    @apply flex items-center gap-1 bg-black/60 text-white text-xs px-2 py-1 rounded;
  }

  /* PropertyGuru-style image counter badge */
  .image-counter-badge {
    @apply absolute bottom-3 left-3 bg-black/70 text-white text-xs font-medium px-2.5 py-1 rounded;
  }

  .gallery-actions {
    @apply absolute top-3 right-3 flex flex-col gap-2;
  }

  .action-btn {
    @apply w-9 h-9 rounded-full bg-white/90 hover:bg-white flex items-center justify-center shadow-md text-gray-600 hover:text-primary-500 transition-all duration-200;
  }

  .action-btn.active {
    @apply bg-primary-500 text-white hover:bg-primary-600;
  }

  .property-badge {
    @apply absolute top-3 left-3 flex gap-2;
  }

  .badge-pill {
    @apply px-2.5 py-1 text-xs font-medium bg-white/90 text-gray-700 rounded shadow-sm;
  }

  .property-card-content {
    @apply p-4;
  }

  .price-section {
    @apply flex items-baseline gap-2 mb-2;
  }

  .price-main {
    @apply text-xl font-bold text-gray-900;
  }

  .price-psf {
    @apply text-sm text-gray-500;
  }

  .property-title {
    @apply font-medium text-gray-900 text-base leading-snug mb-1 line-clamp-2 group-hover:text-primary-600 transition-colors;
  }

  .property-address {
    @apply text-sm text-gray-500 mb-3 line-clamp-1;
  }

  .property-features {
    @apply flex items-center flex-wrap gap-x-3 gap-y-2 text-sm text-gray-600 mb-3 pb-3 border-b border-gray-100;
  }

  .feature-item {
    @apply flex items-center gap-1;
  }

  .feature-divider {
    @apply w-px h-4 bg-gray-200;
  }

  .property-recency {
    @apply flex items-center gap-1.5 text-xs text-gray-400;
  }

  /* Quick Filter Pills */
  .filter-pills {
    @apply flex items-center gap-2 flex-wrap;
  }

  .filter-pill {
    @apply flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-200 rounded-full hover:border-primary-300 hover:bg-primary-50 transition-all duration-200 cursor-pointer;
  }

  .filter-pill.active {
    @apply text-primary-600 border-primary-400 bg-primary-50;
  }

  .filter-pill svg {
    @apply w-4 h-4;
  }

  /* Search Page Tabs */
  .search-tabs {
    @apply flex items-center gap-1 border-b border-gray-200;
  }

  .search-tab {
    @apply px-4 py-3 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:text-primary-600 transition-all cursor-pointer;
  }

  .search-tab.active {
    @apply text-primary-600 border-primary-500;
  }

  /* Input Styles */
  .input-field {
    @apply w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-all duration-200;
  }

  /* Enhanced Input */
  .input-enhanced {
    @apply w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-transparent focus:bg-white transition-all duration-200;
  }

  /* Container */
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Page Header */
  .page-header {
    @apply mb-8;
  }

  .page-title {
    @apply font-heading font-bold text-2xl md:text-3xl text-gray-900 mb-1;
  }

  .page-subtitle {
    @apply text-gray-500;
  }

  /* Results Toolbar */
  .results-toolbar {
    @apply flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 p-4 bg-gray-50 rounded-xl;
  }

  /* Sort Dropdown */
  .sort-dropdown {
    @apply flex items-center gap-2 px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm cursor-pointer hover:border-gray-300 transition-colors;
  }

  /* View Toggle */
  .view-toggle {
    @apply flex items-center gap-1 p-1 bg-gray-100 rounded-lg;
  }

  .view-toggle-btn {
    @apply p-2 rounded-md transition-colors;
  }

  .view-toggle-btn.active {
    @apply bg-white text-primary-600 shadow-sm;
  }

  /* Map Toggle */
  .map-toggle {
    @apply flex items-center gap-2;
  }

  .toggle-switch {
    @apply relative inline-flex h-6 w-11 items-center rounded-full transition-colors bg-gray-200;
  }

  .toggle-switch.active {
    @apply bg-primary-500;
  }

  .toggle-switch-thumb {
    @apply inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform translate-x-1;
  }

  .toggle-switch.active .toggle-switch-thumb {
    @apply translate-x-6;
  }

  /* Pagination Component */
  .pagination-container {
    @apply flex justify-center mt-12;
  }

  .pagination-wrapper {
    @apply inline-flex items-center gap-1 bg-gray-100 rounded-full px-4 py-2;
  }

  .pagination-nav-btn {
    @apply w-9 h-9 flex items-center justify-center rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-200 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-transparent transition-all duration-200;
  }

  .pagination-pages {
    @apply flex items-center gap-1 mx-1;
  }

  .pagination-page-btn {
    @apply w-9 h-9 flex items-center justify-center rounded-full text-sm font-medium text-gray-600 hover:bg-gray-200 transition-all duration-200;
  }

  .pagination-page-btn.active {
    @apply bg-gray-900 text-white hover:bg-gray-800;
  }

  .pagination-ellipsis {
    @apply px-2 text-gray-400;
  }

  /* Stats Badge */
  .stats-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 bg-primary-100 text-primary-700 text-xs font-medium rounded-full;
  }

  /* Agent Card Styles */
  .agent-card {
    @apply bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300;
  }

  .agent-card:hover {
    @apply shadow-lg border-primary-200;
    transform: translateY(-2px);
  }

  .agent-card .agent-avatar {
    @apply w-16 h-16 rounded-full object-cover ring-2 ring-gray-100 transition-all;
  }

  .agent-card:hover .agent-avatar {
    @apply ring-primary-200;
  }

  .agent-card .agent-name {
    @apply font-semibold text-gray-900 transition-colors;
  }

  .agent-card:hover .agent-name {
    @apply text-primary-600;
  }

  .agent-card .agent-status {
    @apply inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700;
  }

  .agent-card .agent-status::before {
    content: '';
    @apply w-1.5 h-1.5 bg-green-500 rounded-full mr-1;
  }

  /* Agent Search Hero */
  .agent-hero-search {
    @apply bg-white rounded-xl overflow-hidden shadow-xl;
  }

  .agent-hero-search input {
    @apply w-full pl-12 pr-4 py-4 text-gray-800 placeholder-gray-400 focus:outline-none;
  }

  .agent-hero-search button {
    @apply bg-primary-600 hover:bg-primary-700 text-white px-8 font-medium transition-colors;
  }

  /* Homepage Hero Search Styles */
  .hero-search-container {
    @apply bg-white rounded-xl shadow-2xl p-4;
  }

  .hero-search-tabs button {
    @apply px-8 py-3 font-semibold text-sm rounded-t-lg transition-all;
  }

  .hero-search-tabs button.active {
    @apply bg-white text-primary-600;
  }

  .hero-search-tabs button:not(.active) {
    @apply bg-white/20 text-white hover:bg-white/30;
  }

  /* Callout Card Styles */
  .callout-card {
    @apply relative overflow-hidden rounded-2xl transition-all duration-300;
  }

  .callout-card:hover {
    @apply shadow-lg transform -translate-y-1;
  }

  .callout-card-blue {
    @apply bg-gradient-to-r from-blue-600 to-blue-800;
  }

  .callout-card-rose {
    @apply bg-gradient-to-r from-rose-600 to-rose-800;
  }

  /* Location Links */
  .location-link {
    @apply text-gray-600 hover:text-primary-600 text-sm py-2 transition-colors;
  }

  /* SEO Info Card */
  .seo-info-card {
    @apply text-center;
  }

  .seo-info-card .icon-container {
    @apply w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4;
  }

  /* ========================================
     MAP VIEW STYLES - Premium Design
     ======================================== */

  /* Map View Container */
  .map-view-container {
    @apply relative flex w-full;
    height: calc(100vh - 280px);
    min-height: 600px;
    /* Create isolated stacking context to prevent Leaflet z-index from overlapping header */
    z-index: 1;
    isolation: isolate;
  }

  /* Map Sidebar - Property List */
  .map-sidebar {
    @apply flex flex-col bg-white border-r border-gray-200;
    width: 420px;
    min-width: 420px;
    max-width: 480px;
  }

  .map-sidebar-header {
    @apply flex items-center justify-between px-4 py-3 border-b border-gray-100 bg-gray-50/80 backdrop-blur-sm;
  }

  .map-sidebar-title {
    @apply text-sm font-semibold text-gray-700;
  }

  .map-sidebar-list {
    @apply flex-1 overflow-y-auto;
  }

  .map-sidebar-content {
    @apply p-3 space-y-2;
  }

  /* Collapse Toggle Button */
  .map-collapse-btn {
    @apply absolute left-0 top-1/2 -translate-y-1/2 z-20 flex items-center justify-center w-6 h-16 bg-white border border-gray-200 border-l-0 rounded-r-lg shadow-md hover:bg-gray-50 transition-all cursor-pointer;
  }

  .map-collapse-btn svg {
    @apply w-4 h-4 text-gray-500 transition-transform;
  }

  .map-sidebar.collapsed+.map-main .map-collapse-btn svg {
    @apply rotate-180;
  }

  /* Map Main Area */
  .map-main {
    @apply relative flex-1;
  }

  /* Compact Property Card for Map View */
  .map-property-card {
    @apply bg-white rounded-lg border border-gray-100 overflow-hidden transition-all duration-200 cursor-pointer;
  }

  .map-property-card:hover,
  .map-property-card.hovered {
    @apply border-primary-300 shadow-md bg-primary-50/30;
  }

  .map-property-card.selected {
    @apply border-primary-500 shadow-lg bg-primary-50 ring-2 ring-primary-200;
  }

  .map-card-image {
    @apply relative w-28 h-28 flex-shrink-0 bg-gray-100 overflow-hidden rounded-lg;
  }

  .map-card-image img {
    @apply w-full h-full object-cover transition-transform duration-300;
  }

  .map-property-card:hover .map-card-image img {
    @apply scale-105;
  }

  .map-card-badge {
    @apply absolute bottom-1 left-1 px-1.5 py-0.5 text-[9px] font-medium bg-black/70 text-white rounded;
    max-width: 90%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .map-card-price {
    @apply text-base font-bold text-gray-900 mb-0.5;
  }

  .map-card-title {
    @apply text-xs font-medium text-gray-700 line-clamp-1 mb-0.5;
  }

  .map-card-location {
    @apply text-[11px] text-gray-500 line-clamp-1 mb-1;
  }

  .map-card-details {
    @apply flex items-center gap-2 text-[11px] text-gray-500;
  }

  .map-card-detail {
    @apply flex items-center gap-0.5;
  }

  /* Map Controls */
  .map-controls {
    @apply absolute bottom-4 right-4 flex flex-col gap-2 z-10;
  }

  .map-control-btn {
    @apply w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-md border border-gray-200 text-gray-600 hover:bg-gray-50 hover:text-primary-600 transition-all cursor-pointer;
  }

  .map-control-btn:active {
    @apply bg-gray-100;
  }

  .map-control-btn svg {
    @apply w-5 h-5;
  }

  .map-control-divider {
    @apply w-full h-px bg-gray-200 my-1;
  }

  /* Recenter Button */
  .map-recenter-btn {
    @apply absolute bottom-4 left-4 flex items-center gap-2 px-3 py-2 bg-white rounded-lg shadow-md border border-gray-200 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600 transition-all cursor-pointer z-10;
  }

  /* Search This Area Button */
  .map-search-area-btn {
    @apply absolute top-4 left-1/2 -translate-x-1/2 flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-lg border border-gray-200 text-sm font-medium text-gray-700 hover:bg-primary-50 hover:text-primary-600 hover:border-primary-300 transition-all cursor-pointer z-10;
  }

  .map-search-area-btn svg {
    @apply w-4 h-4;
  }

  /* Mobile Map Bottom Sheet */
  .map-bottom-sheet {
    @apply fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-2xl shadow-2xl;
    max-height: 60vh;
  }

  .map-bottom-sheet-handle {
    @apply w-12 h-1.5 bg-gray-300 rounded-full mx-auto my-3;
  }

  .map-bottom-sheet-content {
    @apply overflow-y-auto px-4 pb-6;
    max-height: calc(60vh - 40px);
  }

  /* Enhanced Map Markers */
  .map-marker {
    @apply relative cursor-pointer;
    transition: transform 0.2s ease, z-index 0s;
  }

  .map-marker:hover,
  .map-marker.highlighted {
    transform: scale(1.15);
    z-index: 1000 !important;
  }

  .map-marker-price {
    @apply px-3 py-1.5 text-xs font-bold text-white rounded-full shadow-lg border-2 border-white;
    background: linear-gradient(135deg, #EC4899 0%, #F97316 100%);
    white-space: nowrap;
  }

  .map-marker.highlighted .map-marker-price {
    @apply ring-4 ring-primary-300/50;
    background: linear-gradient(135deg, #DB2777 0%, #EA580C 100%);
  }

  .map-marker-arrow {
    @apply w-0 h-0 mx-auto;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 8px solid white;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.1));
  }

  /* Map Empty State */
  .map-empty-state {
    @apply absolute inset-0 z-10 flex items-center justify-center bg-gray-100/95 rounded-lg;
  }

  .map-empty-state-content {
    @apply text-center p-8 max-w-md;
  }

  .map-empty-state-icon {
    @apply w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4;
  }

  .map-empty-state-icon svg {
    @apply w-8 h-8 text-primary-500;
  }

  .map-empty-state-title {
    @apply text-lg font-semibold text-gray-900 mb-2;
  }

  .map-empty-state-text {
    @apply text-gray-600 text-sm;
  }

  /* Map Popup Styles */
  .map-popup {
    @apply bg-white rounded-xl overflow-hidden shadow-xl;
    width: 280px;
  }

  .map-popup-image {
    @apply w-full h-36 object-cover bg-gray-100;
  }

  .map-popup-content {
    @apply p-3;
  }

  .map-popup-price {
    @apply text-lg font-bold text-gray-900 mb-1;
  }

  .map-popup-title {
    @apply text-sm font-medium text-gray-700 line-clamp-2 mb-1;
  }

  .map-popup-details {
    @apply flex items-center gap-3 text-xs text-gray-500 mb-2;
  }

  .map-popup-btn {
    @apply w-full py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors text-center;
  }
}

@layer utilities {

  /* Line Clamp */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Animations */
  .animate-fade-in {
    animation: fadeIn 0.6s ease-in-out;
  }

  .animate-slide-up {
    animation: slideUp 0.6s ease-out;
  }

  .animate-slide-in-left {
    animation: slideInLeft 0.6s ease-out;
  }

  .animate-slide-in-right {
    animation: slideInRight 0.6s ease-out;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-30px);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(30px);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes float {

  0%,
  100% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

/* Smooth Scrolling */
html {
  scroll-behavior: smooth;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #FF6B9D 0%, #C44569 100%);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #C44569;
}

/* Safe area support for iOS devices */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}